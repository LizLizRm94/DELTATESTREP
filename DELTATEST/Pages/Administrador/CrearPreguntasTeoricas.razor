@page "/Administrador/CrearPreguntasTeoricas"
@layout MainSinLayout
@inject HttpClient Http
@inject NavigationManager Nav

<h3 class="titulo-evaluacion">EVALUACION TEORICA</h3>

<div class="card-formulario">
    <EditForm Model="preguntas" OnValidSubmit="GuardarPreguntas">

        @for (int i = 0; i < preguntas.Count; i++)
        {
            <div class="campo-pregunta">
                <label>Pregunta @(i + 1)</label>
                <InputText @bind-Value="preguntas[i]" class="input-pregunta" />
            </div>
        }

        <div class="acciones">
            <button type="submit" class="btn-subir">Subir</button>
            <button type="button" class="btn-cancelar" @onclick="Cancelar">Cancelar</button>
        </div>

    </EditForm>
</div>

@code {
    private List<string> preguntas = new();

    protected override void OnInitialized()
    {
        preguntas = Enumerable.Repeat("", 10).ToList();
    }

    private async Task GuardarPreguntas()
    {
        var lista = preguntas.Select(p => new
        {
            Texto = p,
            TipoEvaluacion = true
        }).ToList();

        var res = await Http.PostAsJsonAsync("api/preguntas", lista);
        if (res.IsSuccessStatusCode)
            Nav.NavigateTo("/Administrador/PanelControl");
    }

    private void Cancelar()
    {
        Nav.NavigateTo("/Administrador/PanelControl");
    }
}

<style>

    /* --- TÍTULO --- */
    .titulo-evaluacion {
        font-size: 28px;
        font-weight: bold;
        margin: 20px 0 30px 20px;
        text-align: left;
        color: #222;
    }

    /* --- CONTENEDOR PRINCIPAL (tarjeta grande) --- */
    .card-formulario {
        width: 80%;
        max-width: 900px;
        margin: auto;
        padding: 40px;
        background: #fff;
        border: 1px solid #e5e5e5;
        border-radius: 10px;
        box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.08);
    }

    /* --- CAMPOS --- */
    .campo-pregunta {
        margin-bottom: 25px;
        text-align: left;
        font-size: 15px;
        color: #444;
    }

    .campo-pregunta label {
        margin-bottom: 5px;
        display: block;
        font-weight: 600;
    }

    /* --- INPUTS ESTILO LIMPIO --- */
    .input-pregunta {
        width: 100%;
        padding: 10px 12px;
        font-size: 15px;
        border-radius: 6px;
        border: 1px solid #dcdcdc;
        background: #fafafa;
    }

    /* --- BOTONES --- */
    .acciones {
        display: flex;
        justify-content: center;
        gap: 40px;
        margin-top: 40px;
    }

    .btn-subir {
        background: #e8a04b;
        color: white;
        padding: 10px 40px;
        border: none;
        border-radius: 6px;
        font-size: 15px;
        cursor: pointer;
        transition: 0.2s;
    }

    .btn-subir:hover {
        background: #d48e3f;
    }zz
    .btn-cancelar {
        background: #e8a04b;
        color: white;
        padding: 10px 40px;
        border: none;
        border-radius: 6px;
        font-size: 15px;
        cursor: pointer;
        transition: 0.2s;
    }

    .btn-cancelar:hover {
        background: #d48e3f;
    }

</style>
